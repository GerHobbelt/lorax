#!/usr/bin/env node

/*
 * Lorax
 * https://github.com/adrianlee44/lorax
 *
 * Copyright (c) 2015 Adrian Lee
 * Licensed under the MIT license.
 */

var path = require('path'),
    fs   = require('fs'),
    dir  = path.join(path.dirname(fs.realpathSync(__filename)), '../'),
    pkg  = require(dir + 'package.json'),
    commander = require('commander');

commander
  .version(pkg.version)
  .usage("[TAG] [FILE] [options]")
  .option('-s, --since [tag]', 'Starting tag version')
  .parse(process.argv);

if (commander.args.length >= 2) {
  var options = {
    since: commander.since
  };

  require(dir + 'index.js').generate(commander.args[0], commander.args[1], options);
} else {
  console.log(commander.helpInformation());
}
